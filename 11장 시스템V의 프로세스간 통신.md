## 시스템 V IPC (3가지: 메시지 큐, 공유 메모리, 세마포)

#### 시스템 five IPC. (inter process communication)



#### 프로세스가 프로세스에게 뭔가를 전달하는 방법은 total 7가지.

**: `시그널, 메모리 매핑, 파이프` & `IPC 3가지(메시지 큐, 공유 메모리, 세마포)`  & `소켓`**

<br>

- 유닉스 계열에는 `시스템 v` 말고도  `BSD 계열`이 있다. 둘이 양대산맥. 

- 시스템 v 계열은 주로 회사 서버에서 사용, BSD 계열은 주로 학교서버에서 사용.

- BSD 계열에서 가장 유명한 함수가 socket()이고, 시스템 v 계열에서 가장 유명한 함수는 `IPC`이다.

- 시스템 v 계열은 프로세스간 통신인`IPC` 의 성능이 아주뛰어나고 보안도 굿. 

  <br>

  #### ----- 아래 3개의 IPC 가 시스템 v 에서 아주 잘 만들어진 IPC.

- `메시지 큐` : 메시지? **메시지는 데이터  + 송수신 정보이다.** (송신자 정보 + 수신자 정보 + 데이터) + 선입선출

  > 메모리 메핑, named unnamed 파이프에서 주고받았던건 그저 데이터였다.(송수신자 정보x)

  <br>

- `공유 메모리`: 이거 어렵다. 프로세스는 메모리가 서로 독립적이라 공유못하는데 - 이 공유하는 공간은 사실상 커널공간임.

  <br>

- `세마포`: 어떤 공유자원에 동시에 여러프로세스 접근 방지. LOCK. 한번에 하나씩만 공유메모리에 접근해라. 

  
<br>


#### 프로세스 <-> 프로세스 간의 데이터 공유를 위한 7가지 방법.

1. 시그널

2. 메모리 매핑

3. 파이프(named: FIFO, unnamed: PIPE)

   ----

4. 메시지 큐

5. 세마포

6. 공유 메모리 

7. 소켓 

<br>

=> 시그널, 메모리 매핑, 파이프, 메시지 큐, 세마포, 공유 메모리 이 6가지 방법은 로컬에서, 한 개의 시스템 안에서만 가능하다.

> 단, 소켓만 서울 -> 부산 원격 프로세스 간의 원격 등 가능.

=> 프로세스가 동시에 엄청많아지면 메시지 큐 세마포 공유 메모리 소켓이 의미가있어지나, 지금은 뭐 5개정도니

<br>

#### <8장>

+ 시그널의 송신자는 커널 or  프로세스. 단,  수신자는 무조건 프로세스여야함. 

+ 주 용도는 커널이 -> 프로세스에게 보내는 용도임.

  + #### 오직 시그널만 주고받음 & 송수신 구분됨

  + kill() 로 신호전송,  수신은 그냥 받음. signal(signo, handler) 로 시그널 액션 변경. 커스텀 가능.

    + kill -l 입력하면 사용가능한 시그널들 확인가능.

    <br>

    <hr>


    #### <9장> 메모리 매핑

    - 부모 자식은 전역변수 공유 못함. 둘의 메모리 공간이 다르기때문에. 독립적인 프로세스임.
    - 프로세스 <-> 프로세스 간의 데이터 공유하려면 메모리 매핑.
    - 메모리 매핑에서 송 수신은 단방향.  아니면 내가 쓰고 내가 읽어가게됨. 
    - 양방향 하려면 채널을 2개 두어야함.

    <br>

    #### <10장> 파이프

    - 이름없는 파이프인 PIPE는 부모-자식 사이에서만 가능.
    - 이름있는 파이프인 FIFO는 모두 가능.
    - 얘도 매핑처럼 단방향. 송수신자 정보 없으니.
    - 양방향 하려면 채널을 2개 두어야함. 


     <hr>

    ### <메시지 큐>

    + 메시지 큐는,  주고받는 것이 `메시지`임. 

    + #### 메시지: 데이터 + 송신 + 수신정보. so, `양방향`이다. 채널 1개만으로.

      > 매핑, 파이프와는 달리.

    

     <hr>

    ### <공유 메모리>shared Memory

    + 공유메모리는 주고받는것이 데이터.

    + #### 근데, 얘는 송수신이 없다.   왜? 공유하니깐. 

    + #### 그렇지만, 동기화는 별도로 지원해줘야한다.

    + #### 이때 지원해주는게 바로 `세마포`.

    
     <hr>
    

    ### <세마포>semaphore

    + 세마포 말고도 다양한 동기화 LOCK 방식이있으나, 애는 마치 디지털 도어락. 기능이많음.
    + 예를들어 1000개의 프로세스 동기화 필요시 -> 뮤텍스면 뮤텍스 1000개필요, but 세마포 1개로 커버가능. 
    + 세마포는 lock 안에 수 만개의 lock 이 또 들어가있어서 ㅇㅇ.

     <hr>

    #### => 메시지 큐, shared Memory, semaphore 이 3개는 IPC.


    <br><br>


    ### <소켓>

    + 소켓은 주고받는 것이 메시지. 

    + 근데 얘는 메시지라고 안하고,`패킷`이라고 부름.

    + #### 패킷안에는 데이터 + 송신 정보 + 수신 정보 + `네트워크Layer. TCP/IP 같은 프로토콜` 이 추가.

     

    

    

    ​		

    

    

